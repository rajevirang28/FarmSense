<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Basic Soil Analysis</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>
<body>

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-10 col-xl-8">
      <h1 class="mb-2 text-center text-primary">Basic Mode Analysis</h1>
      <p class="lead text-center mb-5 text-muted">
        Provide simple field and operational details for a quick soil health prediction.
      </p>

      <form action="/basic.html" method="POST" class="row g-4 border p-4 rounded shadow-sm">
        
        <h5 class="col-12 text-success">üìç Field Context & Climate</h5>

        <div class="col-12 col-md-6">
          <label for="district" class="form-label fw-bold">Select Agricultural District</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-map-marked-alt"></i></span>
            <select name="district" id="district" class="form-select" required>
              <option value="">-- Select a City --</option>
              <option value="Mumbai">Mumbai</option>
              <option value="Pune">Pune</option>
              <option value="Nagpur">Nagpur</option>
              <option value="Nashik">Nashik</option>
              <option value="Aurangabad">Aurangabad</option>
              <option value="Solapur">Solapur</option>
              <option value="Kolhapur">Kolhapur</option>
              <option value="Amravati">Amravati</option>
              <option value="Latur">Latur</option>
              <option value="Akola">Akola</option>
              <option value="Chandrapur">Chandrapur</option>
              <option value="Sangli">Sangli</option>
              <option value="Ahmednagar">Ahmednagar</option>
              <option value="Thane">Thane</option>
              <option value="Satara">Satara</option>
            </select>
          </div>
        </div>

        <div class="col-12 mt-3">
          <h5 class="text-primary">
            Environmental Parameters
            <button class="btn btn-sm btn-outline-primary ms-2" type="button" data-bs-toggle="collapse"
              data-bs-target="#environmentalData" aria-expanded="false" aria-controls="environmentalData">
              <i class="fas fa-eye"></i> Show Details
            </button>
          </h5>
        </div>

        <div class="collapse row g-4" id="environmentalData">
          <div class="col-12 col-md-6">
            <label class="form-label fw-bold">NDVI Value</label>
            <input type="text" id="ndvi" name="ndvi" class="form-control" placeholder="Auto" readonly />
          </div>

          <div class="col-12 col-md-6">
            <label class="form-label fw-bold">Average Temperature (¬∞C)</label>
            <input type="text" id="avgTemp" name="avgTemp" class="form-control" readonly />
          </div>

          <div class="col-12 col-md-6">
            <label class="form-label fw-bold">Average Rainfall (mm)</label>
            <input type="text" id="rainfall" name="rainfall" class="form-control" readonly />
          </div>

          <div class="col-12 col-md-6">
            <label class="form-label fw-bold">Wind Speed (m/s)</label>
            <input type="text" id="windSpeed" name="windSpeed" class="form-control" readonly />
          </div>

          <div class="col-12 col-md-6">
            <label class="form-label fw-bold">Cloud Cover (%)</label>
            <input type="text" id="cloudCover" name="cloudCover" class="form-control" readonly />
          </div>

          <div class="col-12 col-md-6">
            <label class="form-label fw-bold">Sunshine Hours (hours/day)</label>
            <input type="text" id="sunshine" name="sunshine" class="form-control" readonly />
          </div>

          <div class="col-12 col-md-6">
            <label class="form-label fw-bold">Organic Carbon (%)</label>
            <input type="number" step="0.01" id="organicCarbon" name="organicCarbon" class="form-control"
              placeholder="e.g., 0.75" />
          </div>
        </div>

        <div class="col-12 col-md-6">
          <label for="season" class="form-label fw-bold">Select Agricultural Season</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-cloud-sun"></i></span>
            <select name="season" id="season" class="form-select" required>
              <option value="">Choose Season...</option>
              <option>Rabi</option>
              <option>Kharif</option>
              <option>Summer</option>
            </select>
          </div>
        </div>

        <h5 class="col-12 text-success mt-3">üß± Soil Characteristics</h5>

        <div class="col-12 col-md-6">
          <label for="soilType" class="form-label">Select Soil Type</label>
          <select name="soilType" id="soilType" class="form-select" required>
            <option value="">Choose Soil Type...</option>
            <option>Alluvial</option>
            <option>Latrite</option>
            <option>Sandy</option>
            <option>Red</option>
            <option>Black</option>
          </select>
        </div>

        <div class="col-12 col-md-6">
          <label for="soilColor" class="form-label">Select Soil Color</label>
          <select name="soilColor" id="soilColor" class="form-select" required>
            <option value="">Choose Soil Color...</option>
            <option>Grey</option>
            <option>Light Brown</option>
            <option>Dark Black</option>
            <option>Reddish Brown</option>
          </select>
        </div>

        <h5 class="col-12 text-success mt-3">üöú Farming Practices</h5>

        <div class="col-12 col-md-6">
          <label for="cropRotation" class="form-label">Crop Rotation Score (0-10)</label>
          <div class="input-group">
            <span class="input-group-text"><i class="fas fa-sync-alt"></i></span>
            <input type="number" name="cropRotation" id="cropRotation" class="form-control" placeholder="e.g., 7" min="0"
              max="10" required />
          </div>
          <div class="form-text">Higher scores indicate better practice.</div>
        </div>

        <div class="col-12 col-md-6">
          <label for="fertilizer" class="form-label">Fertilizer Usage Intensity</label>
          <select name="fertilizer" id="fertilizer" class="form-select" required>
            <option value="">Choose Usage...</option>
            <option>Low</option>
            <option>Medium</option>
            <option>High</option>
          </select>
        </div>

        <div class="col-12 col-md-6">
          <label for="manure" class="form-label">Manure / Organic Fertilizer Usage</label>
          <select name="manure" id="manure" class="form-select" required>
            <option value="">Choose Option...</option>
            <option>Yes</option>
            <option>No</option>
          </select>
        </div>

        <div class="col-12 col-md-6">
          <label for="irrigation" class="form-label">Select Irrigation Method</label>
          <select name="irrigation" id="irrigation" class="form-select" required>
            <option value="">Choose Method...</option>
            <option>Rainfed</option>
            <option>Tubewell</option>
            <option>Canal</option>
            <option>Drip/Sprinkler</option>
          </select>
        </div>

        <h5 class="col-12 text-success mt-3">üîç Visual Observation</h5>

        <div class="col-12">
          <label for="symptoms" class="form-label">Visible Crop/Soil Symptoms</label>
          <select name="symptoms" id="symptoms" class="form-select" required>
            <option value="">Select Symptoms...</option>
            <option>None/Healthy</option>
            <option>Yellowing</option>
            <option>Wilting</option>
            <option>Stunted Growth</option>
            <option>Leaf Spots/Disease</option>
          </select>
        </div>

        <div class="col-12 mt-4">
          <button type="submit" class="btn btn-primary btn-lg w-100">
            <i class="fas fa-leaf me-2"></i> Predict Soil Health Status
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  const API_KEY = "109dbe4aee08a2349bbf1fbd7eb69628";
  const districtSelect = document.getElementById("district");

  const ndviInput = document.getElementById("ndvi");
  const avgTempInput = document.getElementById("avgTemp");
  const rainfallInput = document.getElementById("rainfall");
  const windSpeedInput = document.getElementById("windSpeed");
  const cloudCoverInput = document.getElementById("cloudCover");
  const sunshineInput = document.getElementById("sunshine");
  const organicCarbonInput = document.getElementById("organicCarbon");

  const avgRainfallData = {
    Mumbai: 2400, Pune: 720, Nagpur: 1100, Nashik: 900,
    Aurangabad: 700, Solapur: 670, Kolhapur: 2000, Amravati: 960,
    Latur: 800, Akola: 950, Chandrapur: 1200, Sangli: 600,
    Ahmednagar: 550, Thane: 3000, Satara: 1100
  };

  districtSelect.addEventListener("change", async () => {
    const city = districtSelect.value.trim();
    if (!city) return;

    try {
      const res = await fetch(
        `https://api.openweathermap.org/data/2.5/weather?q=${city},IN&appid=${API_KEY}&units=metric`
      );
      const data = await res.json();

      if (data && data.main) {
        const temp = data.main.temp || 0;
        const wind = data.wind?.speed || 0;
        const clouds = data.clouds?.all || 0;

        avgTempInput.value = temp.toFixed(1);
        windSpeedInput.value = wind + " m/s";
        cloudCoverInput.value = clouds + " %";

        const sunshineHours = (12 * (100 - clouds)) / 100;
        sunshineInput.value = sunshineHours.toFixed(1);

        const avgRain = avgRainfallData[city] || 800;
        rainfallInput.value = avgRain + " mm";

        const ndviValue = (Math.random() * 0.8 + 0.2).toFixed(2);
        ndviInput.value = ndviValue;

        const organicCarbon = (0.2 + ndviValue * 0.5).toFixed(2);
        organicCarbonInput.value = organicCarbon;
      } else {
        avgTempInput.value = windSpeedInput.value =
        cloudCoverInput.value = sunshineInput.value =
        rainfallInput.value = ndviInput.value = organicCarbonInput.value = "N/A";
      }
    } catch (err) {
      console.error("Error fetching weather:", err);
      avgTempInput.value = windSpeedInput.value =
      cloudCoverInput.value = sunshineInput.value =
      rainfallInput.value = ndviInput.value = organicCarbonInput.value = "N/A";
    }
  });
</script>


</body>
</html>
